(function(d,na,t){d.fn.jScrollPane=function(C){function fa(b,C){function ga(a){var c,f,u,r,y,k=!1,m=!1;e=a;if(g===t)r=b.scrollTop(),y=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),p=b.innerWidth()+O,l=b.innerHeight(),b.width(p),g=d('<div class="jspPane" />').css("padding",oa).append(b.children()),h=d('<div class="jspContainer" />').css({width:p+"px",height:l+"px"}).append(g).appendTo(b);else{b.css("width","");k=e.stickToBottom&&va();m=e.stickToRight&&wa();if(u=b.innerWidth()+O!=p||b.outerHeight()!=
l)p=b.innerWidth()+O,l=b.innerHeight(),h.css({width:p+"px",height:l+"px"});if(!u&&pa==v&&g.outerHeight()==s){b.width(p);return}pa=v;g.css("width","");b.width(p);h.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}g.css("overflow","auto");v=a.contentWidth?a.contentWidth:g[0].scrollWidth;s=g[0].scrollHeight;g.css("overflow","");ha=v/p;Y=s/l;z=1<Y;if((A=1<ha)||z){b.addClass("jspScrollable");if(a=e.maintainPosition&&(n||q))c=G(),f=H();fa();xa();ya();a&&(Q(m?v-p:c,!1),I(k?s-l:f,!1));za();Aa();
Ba();e.enableKeyboardNavigation&&Ca();e.clickOnTrack&&Da();Ea();e.hijackInternalLinks&&Fa()}else b.removeClass("jspScrollable"),g.css({top:0,width:h.width()-O}),h.unbind(ia),g.find(":input,a").unbind("focus.jsp"),b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),qa();e.autoReinitialise&&!R?R=setInterval(function(){ga(e)},e.autoReinitialiseDelay):!e.autoReinitialise&&R&&clearInterval(R);r&&b.scrollTop(0)&&I(r,!1);y&&b.scrollLeft(0)&&Q(y,!1);b.trigger("jsp-initialised",
[A||z])}function fa(){z&&(h.append(d('<div class="jspVerticalBar" />').append(d('<div class="jspCap jspCapTop" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragTop" />'),d('<div class="jspDragBottom" />'))),d('<div class="jspCap jspCapBottom" />'))),Z=h.find(">.jspVerticalBar"),D=Z.find(">.jspTrack"),w=D.find(">.jspDrag"),e.showArrows&&(U=d('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",J(0,-1)).bind("click.jsp",S),V=d('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
J(0,1)).bind("click.jsp",S),e.arrowScrollOnHover&&(U.bind("mouseover.jsp",J(0,-1,U)),V.bind("mouseover.jsp",J(0,1,V))),ra(D,e.verticalArrowPositions,U,V)),K=l,h.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){K-=d(this).outerHeight()}),w.hover(function(){w.addClass("jspHover")},function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(a){d("html").bind("dragstart.jsp selectstart.jsp",S);w.addClass("jspActive");var c=a.pageY-w.position().top;d("html").bind("mousemove.jsp",
function(a){P(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",sa);return!1}),ta())}function ta(){D.height(K+"px");n=0;ja=e.verticalGutter+D.outerWidth();g.width(p-ja-O);try{0===Z.position().left&&g.css("margin-left",ja+"px")}catch(a){}}function xa(){A&&(h.append(d('<div class="jspHorizontalBar" />').append(d('<div class="jspCap jspCapLeft" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragLeft" />'),d('<div class="jspDragRight" />'))),d('<div class="jspCap jspCapRight" />'))),
$=h.find(">.jspHorizontalBar"),E=$.find(">.jspTrack"),x=E.find(">.jspDrag"),e.showArrows&&(W=d('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",J(-1,0)).bind("click.jsp",S),X=d('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",J(1,0)).bind("click.jsp",S),e.arrowScrollOnHover&&(W.bind("mouseover.jsp",J(-1,0,W)),X.bind("mouseover.jsp",J(1,0,X))),ra(E,e.horizontalArrowPositions,W,X)),x.hover(function(){x.addClass("jspHover")},function(){x.removeClass("jspHover")}).bind("mousedown.jsp",
function(a){d("html").bind("dragstart.jsp selectstart.jsp",S);x.addClass("jspActive");var c=a.pageX-x.position().left;d("html").bind("mousemove.jsp",function(a){T(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",sa);return!1}),B=h.innerWidth(),ua())}function ua(){h.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){B-=d(this).outerWidth()});E.width(B+"px");q=0}function ya(){if(A&&z){var a=E.outerHeight(),c=D.outerWidth();K-=a;d($).find(">.jspCap:visible,>.jspArrow").each(function(){B+=
d(this).outerWidth()});B-=c;l-=c;p-=a;E.parent().append(d('<div class="jspCorner" />').css("width",a+"px"));ta();ua()}A&&g.width(h.outerWidth()-O+"px");s=g.outerHeight();Y=s/l;A&&(L=Math.ceil(1/ha*B),L>e.horizontalDragMaxWidth?L=e.horizontalDragMaxWidth:L<e.horizontalDragMinWidth&&(L=e.horizontalDragMinWidth),x.width(L+"px"),M=B-L,ka(q));z&&(N=Math.ceil(1/Y*K),N>e.verticalDragMaxHeight?N=e.verticalDragMaxHeight:N<e.verticalDragMinHeight&&(N=e.verticalDragMinHeight),w.height(N+"px"),F=K-N,la(n))}function ra(a,
c,f,d){var e="before",b="after";"os"==c&&(c=/Mac/.test(navigator.platform)?"after":"split");c==e?b=c:c==b&&(e=c,c=f,f=d,d=c);a[e](f)[b](d)}function J(a,c,f){return function(){Ga(a,c,this,f);this.blur();return!1}}function Ga(a,c,f,u){f=d(f).addClass("jspActive");var b,y,k=!0,h=function(){0!==a&&m.scrollByX(a*e.arrowButtonSpeed);0!==c&&m.scrollByY(c*e.arrowButtonSpeed);y=setTimeout(h,k?e.initialDelay:e.arrowRepeatFreq);k=!1};h();b=u?"mouseout.jsp":"mouseup.jsp";u=u||d("html");u.bind(b,function(){f.removeClass("jspActive");
y&&clearTimeout(y);y=null;u.unbind(b)})}function Da(){qa();z&&D.bind("mousedown.jsp",function(a){if(a.originalTarget===t||a.originalTarget==a.currentTarget){var c=d(this),f=c.offset(),b=a.pageY-f.top-n,r,y=!0,k=function(){var f=c.offset(),f=a.pageY-f.top-N/2,d=l*e.scrollPagePercent,g=F*d/(s-l);if(0>b)n-g>f?m.scrollByY(-d):P(f);else if(0<b)n+g<f?m.scrollByY(d):P(f);else{h();return}r=setTimeout(k,y?e.initialDelay:e.trackClickRepeatFreq);y=!1},h=function(){r&&clearTimeout(r);r=null;d(document).unbind("mouseup.jsp",
h)};k();d(document).bind("mouseup.jsp",h);return!1}});A&&E.bind("mousedown.jsp",function(a){if(a.originalTarget===t||a.originalTarget==a.currentTarget){var c=d(this),f=c.offset(),b=a.pageX-f.left-q,r,h=!0,k=function(){var f=c.offset(),f=a.pageX-f.left-L/2,d=p*e.scrollPagePercent,l=M*d/(v-p);if(0>b)q-l>f?m.scrollByX(-d):T(f);else if(0<b)q+l<f?m.scrollByX(d):T(f);else{g();return}r=setTimeout(k,h?e.initialDelay:e.trackClickRepeatFreq);h=!1},g=function(){r&&clearTimeout(r);r=null;d(document).unbind("mouseup.jsp",
g)};k();d(document).bind("mouseup.jsp",g);return!1}})}function qa(){E&&E.unbind("mousedown.jsp");D&&D.unbind("mousedown.jsp")}function sa(){d("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");w&&w.removeClass("jspActive");x&&x.removeClass("jspActive")}function P(a,c){z&&(0>a?a=0:a>F&&(a=F),c===t&&(c=e.animateScroll),c?m.animate(w,"top",a,la):(w.css("top",a),la(a)))}function la(a){a===t&&(a=w.position().top);h.scrollTop(0);n=a;var c=0===n,f=n==F;a=-(a/F)*(s-l);
if(aa!=c||ba!=f)aa=c,ba=f,b.trigger("jsp-arrow-change",[aa,ba,ca,da]);e.showArrows&&(U[c?"addClass":"removeClass"]("jspDisabled"),V[f?"addClass":"removeClass"]("jspDisabled"));g.css("top",a);b.trigger("jsp-scroll-y",[-a,c,f]).trigger("scroll")}function T(a,c){A&&(0>a?a=0:a>M&&(a=M),c===t&&(c=e.animateScroll),c?m.animate(x,"left",a,ka):(x.css("left",a),ka(a)))}function ka(a){a===t&&(a=x.position().left);h.scrollTop(0);q=a;var c=0===q,f=q==M;a=-(a/M)*(v-p);if(ca!=c||da!=f)ca=c,da=f,b.trigger("jsp-arrow-change",
[aa,ba,ca,da]);e.showArrows&&(W[c?"addClass":"removeClass"]("jspDisabled"),X[f?"addClass":"removeClass"]("jspDisabled"));g.css("left",a);b.trigger("jsp-scroll-x",[-a,c,f]).trigger("scroll")}function I(a,c){P(a/(s-l)*F,c)}function Q(a,c){T(a/(v-p)*M,c)}function ea(a,c,f){var b,r,g=0,k=0,m,n,q;try{b=d(a)}catch(s){return}r=b.outerHeight();a=b.outerWidth();h.scrollTop(0);for(h.scrollLeft(0);!b.is(".jspPane");)if(g+=b.position().top,k+=b.position().left,b=b.offsetParent(),/^body|html$/i.test(b[0].nodeName))return;
b=H();m=b+l;g<b||c?n=g-e.verticalGutter:g+r>m&&(n=g-l+r+e.verticalGutter);n&&I(n,f);g=G();n=g+p;k<g||c?q=k-e.horizontalGutter:k+a>n&&(q=k-p+a+e.horizontalGutter);q&&Q(q,f)}function G(){return-g.position().left}function H(){return-g.position().top}function va(){var a=s-l;return 20<a&&10>a-H()}function wa(){var a=v-p;return 20<a&&10>a-G()}function Aa(){h.unbind(ia).bind(ia,function(a,c,f,d){a=q;c=n;m.scrollBy(f*e.mouseWheelSpeed,-d*e.mouseWheelSpeed,!1);return a==q&&c==n})}function S(){return!1}function za(){g.find(":input,a").unbind("focus.jsp").bind("focus.jsp",
function(a){ea(a.target,!1)})}function Ca(){function a(){var a=q,d=n;switch(c){case 40:m.scrollByY(e.keyboardSpeed,!1);break;case 38:m.scrollByY(-e.keyboardSpeed,!1);break;case 34:case 32:m.scrollByY(l*e.scrollPagePercent,!1);break;case 33:m.scrollByY(-l*e.scrollPagePercent,!1);break;case 39:m.scrollByX(e.keyboardSpeed,!1);break;case 37:m.scrollByX(-e.keyboardSpeed,!1)}return f=a!=q||d!=n}var c,f,u=[];A&&u.push($[0]);z&&u.push(Z[0]);g.focus(function(){b.focus()});b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",
function(b){if(b.target===this||u.length&&d(b.target).closest(u).length){var e=q,g=n;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:c=b.keyCode;a();break;case 35:I(s-l);c=null;break;case 36:I(0),c=null}f=b.keyCode==c&&e!=q||g!=n;return!f}}).bind("keypress.jsp",function(b){b.keyCode==c&&a();return!f});e.hideFocus?(b.css("outline","none"),"hideFocus"in h[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in h[0]&&b.attr("hideFocus",!1))}function Ea(){if(location.hash&&
1<location.hash.length){var a,c,b=escape(location.hash.substr(1));try{a=d("#"+b+', a[name="'+b+'"]')}catch(e){return}a.length&&g.find(b)&&(0===h.scrollTop()?c=setInterval(function(){0<h.scrollTop()&&(ea(a,!0),d(document).scrollTop(h.position().top),clearInterval(c))},50):(ea(a,!0),d(document).scrollTop(h.position().top)))}}function Fa(){d(document.body).data("jspHijack")||(d(document.body).data("jspHijack",!0),d(document.body).delegate("a[href*=#]","click",function(a){var c=this.href.substr(0,this.href.indexOf("#")),
b=location.href,e;-1!==location.href.indexOf("#")&&(b=location.href.substr(0,location.href.indexOf("#")));if(c===b){c=escape(this.href.substr(this.href.indexOf("#")+1));e;try{e=d("#"+c+', a[name="'+c+'"]')}catch(g){return}e.length&&(c=e.closest(".jspScrollable"),b=c.data("jsp"),b.scrollToElement(e,!0),c[0].scrollIntoView&&(b=d(na).scrollTop(),e=e.offset().top,(e<b||e>b+d(na).height())&&c[0].scrollIntoView()),a.preventDefault())}}))}function Ba(){var a,c,b,d,e,g=!1;h.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick MSPointerDown.jsp MSPointerMove.jsp MSPointerUp.jsp MSPointerCancel.jsp").bind("touchstart.jsp MSPointerDown.jsp",
function(k){k=k.originalEvent.touches?k.originalEvent.touches[0]:k.originalEvent;a=G();c=H();b=k.pageX;d=k.pageY;e=!1;g=!0}).bind("touchmove.jsp MSPointerMove.jsp",function(k){if(g){var h=q,l=n;k=k.originalEvent.touches?k.originalEvent.touches[0]:k.originalEvent;m.scrollTo(a+b-k.pageX,c+d-k.pageY);e=e||5<Math.abs(b-k.pageX)||5<Math.abs(d-k.pageY);return h==q&&l==n}}).bind("touchend.jsp MSPointerUp.jsp MSPointerCancel.jsp",function(a){g=!1}).bind("click.jsp-touchclick",function(a){if(e)return e=!1})}
var e,m=this,g,p,l,h,v,s,ha,Y,z,A,w,F,n,x,M,q,Z,D,ja,K,N,U,V,$,E,B,L,W,X,R,oa,O,pa,aa=!0,ca=!0,ba=!1,da=!1,ma=b.clone(!1,!1).empty(),ia=d.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";oa=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft");O=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0);d.extend(m,{reinitialise:function(a){a=d.extend({},e,a);ga(a)},scrollToElement:function(a,c,b){ea(a,c,b)},scrollTo:function(a,c,b){Q(a,
b);I(c,b)},scrollToX:function(a,c){Q(a,c)},scrollToY:function(a,c){I(a,c)},scrollToPercentX:function(a,c){Q(a*(v-p),c)},scrollToPercentY:function(a,c){I(a*(s-l),c)},scrollBy:function(a,c,b){m.scrollByX(a,b);m.scrollByY(c,b)},scrollByX:function(a,c){var b=(G()+Math[0>a?"floor":"ceil"](a))/(v-p);T(b*M,c)},scrollByY:function(a,b){var d=(H()+Math[0>a?"floor":"ceil"](a))/(s-l);P(d*F,b)},positionDragX:function(a,b){T(a,b)},positionDragY:function(a,b){P(a,b)},animate:function(a,b,d,g){var h={};h[b]=d;a.animate(h,
{duration:e.animateDuration,easing:e.animateEase,queue:!1,step:g})},getContentPositionX:function(){return G()},getContentPositionY:function(){return H()},getContentWidth:function(){return v},getContentHeight:function(){return s},getPercentScrolledX:function(){return G()/(v-p)},getPercentScrolledY:function(){return H()/(s-l)},getIsScrollableH:function(){return A},getIsScrollableV:function(){return z},getContentPane:function(){return g},scrollToBottom:function(a){P(F,a)},hijackInternalLinks:d.noop,
destroy:function(){var a=H(),c=G();b.removeClass("jspScrollable").unbind(".jsp");b.replaceWith(ma.append(g.children()));ma.scrollTop(a);ma.scrollLeft(c);R&&clearInterval(R)}});ga(C)}C=d.extend({},d.fn.jScrollPane.defaults,C);d.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){C[this]=C[this]||C.speed});return this.each(function(){var b=d(this),t=b.data("jsp");t?t.reinitialise(C):(d("script",b).filter('[type="text/javascript"],:not([type])').remove(),t=new fa(b,
C),b.data("jsp",t))})};d.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:t,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,
trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!0,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(epGlobal.jQuery,this);
