define(['jquery'], function(jquery){
(function (e) {
    e.fn.hoverIntent = function (a, f, p) {
        var b = {interval: 100, sensitivity: 7, timeout: 0}, b = "object" === typeof a ? e.extend(b, a) : e.isFunction(f) ? e.extend(b, {over: a, out: f, selector: p}) : e.extend(b, {over: a, out: a, selector: f}), g, h, k, l, m = function (b) {
            g = b.pageX;
            h = b.pageY
        }, n = function (a, d) {
            d.hoverIntent_t = clearTimeout(d.hoverIntent_t);
            if (Math.abs(k - g) + Math.abs(l - h) < b.sensitivity)return e(d).off("mousemove.hoverIntent", m), d.hoverIntent_s = 1, b.over.apply(d, [a]);
            k = g;
            l = h;
            d.hoverIntent_t = setTimeout(function () {
                    n(a, d)
                },
                b.interval)
        };
        a = function (a) {
            var d = jquery.extend({}, a), c = this;
            c.hoverIntent_t && (c.hoverIntent_t = clearTimeout(c.hoverIntent_t));
            "mouseenter" == a.type ? (k = d.pageX, l = d.pageY, e(c).on("mousemove.hoverIntent", m), 1 != c.hoverIntent_s && (c.hoverIntent_t = setTimeout(function () {
                n(d, c)
            }, b.interval))) : (e(c).off("mousemove.hoverIntent", m), 1 == c.hoverIntent_s && (c.hoverIntent_t = setTimeout(function () {
                c.hoverIntent_t = clearTimeout(c.hoverIntent_t);
                c.hoverIntent_s = 0;
                b.out.apply(c, [d])
            }, b.timeout)))
        };
        return this.on({"mouseenter.hoverIntent": a,
            "mouseleave.hoverIntent": a}, b.selector)
    }
})(jquery);
});